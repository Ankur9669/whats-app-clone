(this["webpackJsonpwhats-app-clone"]=this["webpackJsonpwhats-app-clone"]||[]).push([[0],{100:function(e,t,c){},101:function(e,t,c){},102:function(e,t,c){},103:function(e,t,c){"use strict";c.r(t);var s=c(0),a=c.n(s),n=c(22),i=c.n(n),r=(c(68),c(6)),o=(c(69),c(70),c(71),c(51)),j=c.n(o),l=c(52),d=c.n(l),b=c(33),h=c.n(b),m=c(118),O=c(34),u=c.n(O),f=(c(72),c(1));var x=function(){return Object(f.jsxs)("div",{className:"sidebar-left-header-container",children:[Object(f.jsxs)("div",{className:"sidebar-left-header",children:[Object(f.jsx)("div",{className:"sidebar-left-header-img-container",children:Object(f.jsx)("img",{className:"sidebar-left-header-img",src:"https://d27jswm5an3efw.cloudfront.net/app/uploads/2020/12/Casey2-150x150.jpg",alt:"no-image"})}),Object(f.jsxs)("div",{className:"sidebar-left-header-icons-container",children:[Object(f.jsx)(m.a,{children:Object(f.jsx)(j.a,{className:"icons"})}),Object(f.jsx)(m.a,{children:Object(f.jsx)(d.a,{className:"icons"})}),Object(f.jsx)(m.a,{children:Object(f.jsx)(h.a,{className:"icons"})})]})]}),Object(f.jsxs)("div",{className:"sidebar-left-search-bar-container",children:[Object(f.jsx)(u.a,{className:"sidebar-left-search-bar-icon"}),Object(f.jsx)("input",{className:"sidebar-left-search-bar",placeholder:"Search Or Start A New Chat"})]})]})},p=(c(78),c(4)),g=Object(s.createContext)(),v=function(e){var t=e.reducer,c=e.initialState,a=e.children;return Object(f.jsx)(g.Provider,{value:Object(s.useReducer)(t,c),children:a})},N=function(){return Object(s.useContext)(g)};var w=function(e){var t=N(),c=Object(r.a)(t,2),a=(c[0],c[1]),n=Object(p.f)(),i=Object(s.useState)(window.innerWidth),o=Object(r.a)(i,2),j=o[0];return o[1],Object(f.jsxs)("div",{className:"sidebar-left-message",onClick:function(){j<700&&n.push("/chat"),a({type:"SET_ROOM_ID",roomId:e.roomId})},children:[Object(f.jsx)("div",{className:"sidebar-left-message-img",children:Object(f.jsx)("img",{className:"sidebar-left-header-img",src:"https://d27jswm5an3efw.cloudfront.net/app/uploads/2020/12/Casey2-150x150.jpg",alt:"no-image"})}),Object(f.jsxs)("div",{className:"sidebar-left-message-msg",children:[Object(f.jsx)("p",{style:{color:"white",fontWeight:"600"},children:e.roomName}),Object(f.jsx)("p",{style:{color:"white",fontWeight:"400"},children:"Tap to View messages"})]}),Object(f.jsx)("div",{className:"sidebar-left-message-time",children:Object(f.jsx)("p",{style:{color:"white"},children:"7:03PM"})})]})},S=c(53),y=c.n(S).a.create({baseURL:"https://whats-app-backend-ankur9669.herokuapp.com/"});var I=function(){var e=Object(s.useState)([]),t=Object(r.a)(e,2),c=t[0],a=t[1];return Object(s.useEffect)((function(){y.get("/v3/roomList").then((function(e){e?a(e.data):console.log("Error in getting the list of rooms")}))}),[]),Object(f.jsxs)("div",{className:"sidebar-left",children:[Object(f.jsx)(x,{}),Object(f.jsx)("div",{className:"sidebar-left-message-container",children:c.map((function(e){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(w,{roomName:e.roomName,roomId:e._id}),Object(f.jsx)("hr",{style:{opacity:"0.1"}})]})}))})]})},C=(c(98),c(61)),k=(c(99),c(54)),E=c.n(k);var W=function(e){var t=Object(s.useRef)(),c=Object(s.useState)([]),a=Object(r.a)(c,2),n=a[0],i=a[1],o=N(),j=Object(r.a)(o,2),l=j[0];return j[1],Object(s.useEffect)((function(){l.roomId.length>1&&y.get("/v3/messages/"+l.roomId).then((function(e){e?i(e.data):alert("Some Error in fetching")}))}),[l.roomId]),Object(s.useEffect)((function(){t&&(t.current.scrollTop=t.current.scrollHeight);var e=new E.a("4cee5d7aff5e3596cb6c",{cluster:"ap2"}),c=e.subscribe("rooms");return c.bind("inserted",(function(e){e.roomId===l.roomId&&i([].concat(Object(C.a)(n),[e]))})),function(){e.unsubscribe(),c.unbind_all()}}),[n]),Object(f.jsx)("div",{className:"sidebar-right-chat",ref:t,children:n.map((function(e){return Object(f.jsxs)("div",{className:e.received?"chat-msg-received":"chat-msg-sent",children:[Object(f.jsx)("span",{className:"chat-sender-name",children:Object(f.jsx)("p",{children:null===e||void 0===e?void 0:e.name})}),Object(f.jsx)("span",{className:"chat-msg",children:Object(f.jsx)("p",{children:null===e||void 0===e?void 0:e.message})}),Object(f.jsx)("span",{className:"chat-date-time",children:Object(f.jsx)("p",{children:null===e||void 0===e?void 0:e.timestamp})})]})}))})},T=(c(100),c(57)),z=c.n(T),A=c(58),F=c.n(A),L=c(55),R=c.n(L),_=c(56),M=c.n(_);var P=function(){var e=Object(s.useState)(""),t=Object(r.a)(e,2),c=t[0],a=t[1],n=N(),i=Object(r.a)(n,2),o=i[0],j=(i[1],Object(s.useState)(!1)),l=Object(r.a)(j,2),d=l[0],b=l[1];function h(){c.length>0&&(y.post("/v3/messages/"+(null===o||void 0===o?void 0:o.roomId),{roomId:null===o||void 0===o?void 0:o.roomId,message:c,name:"Ankur",timestamp:(new Date).toUTCString(),received:!1}),a(""),b(!d))}return Object(f.jsxs)(f.Fragment,{children:[d&&Object(f.jsxs)("div",{className:"emoji-picker-container",children:[Object(f.jsx)(M.a,{style:{color:"white",cursor:"pointer"},fontSize:"large",onClick:function(){return b(!d)}}),Object(f.jsx)(R.a,{onEmojiClick:function(e,t){a(c+t.emoji)}})]}),Object(f.jsxs)("div",{className:"sidebar-right-footer",children:[Object(f.jsx)(m.a,{onClick:function(){return b(!d)},children:Object(f.jsx)(z.a,{className:"icons"})}),Object(f.jsx)("input",{className:"chat-bar",placeholder:"Send chat",onChange:function(e){return a(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&h()},value:c}),Object(f.jsx)(m.a,{onClick:h,children:Object(f.jsx)(F.a,{className:"icons"})})]})]})};c(101);var D=function(){return Object(f.jsxs)("div",{className:"sidebar-right-header",children:[Object(f.jsx)("div",{className:"sidebar-right-header-img-container",children:Object(f.jsx)("img",{className:"sidebar-right-header-img",src:"https://d27jswm5an3efw.cloudfront.net/app/uploads/2020/12/Casey2-150x150.jpg",alt:"no-image"})}),Object(f.jsxs)("div",{className:"sidebar-right-header-name-container",children:[Object(f.jsx)("p",{style:{color:"white",fontWeight:"600"},children:"Ankur gupta"}),Object(f.jsx)("p",{style:{color:"white",fontWeight:"400"},children:"online"})]}),Object(f.jsxs)("div",{className:"sidebar-right-header-icons-container",children:[Object(f.jsx)(m.a,{children:Object(f.jsx)(u.a,{className:"icons"})}),Object(f.jsx)(m.a,{children:Object(f.jsx)(h.a,{className:"icons"})})]})]})};var B=function(e){return Object(f.jsxs)("div",{className:"sidebar-right",children:[Object(f.jsx)(D,{}),Object(f.jsx)(W,{}),Object(f.jsx)(P,{})]})},J=c(36),U=c(59),H=c.n(U),K=c(60),V=c.n(K);c(102);var q=function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsxs)("div",{className:"loader",children:[Object(f.jsx)("div",{className:"logo-wrapper",children:Object(f.jsx)(H.a,{style:{color:"gray",fontSize:"4rem"},className:"whats-app-icon"})}),Object(f.jsx)("div",{className:"loader-progress"}),Object(f.jsx)("p",{style:{color:"rgba(241, 241, 242, 0.88)",fontWeight:"600",fontSize:"1.2rem"},children:"WhatsApp"}),Object(f.jsxs)("p",{className:"loader-msg",children:[Object(f.jsxs)("p",{children:[Object(f.jsx)(V.a,{fontSize:"small",style:{marginRight:"7px",marginTop:"2px",fontSize:"18px"}}),"Not End to End Encrypted\ud83d\ude02."]}),"Made With Love \u2665\u2665\u2665. By Ankur."]})]})})};var G=function(){var e=Object(s.useState)(!1),t=Object(r.a)(e,2),c=t[0],a=t[1],n=Object(s.useState)([]),i=Object(r.a)(n,2),o=i[0],j=(i[1],Object(s.useState)(window.innerWidth)),l=Object(r.a)(j,2),d=l[0],b=l[1];function h(){b(window.innerWidth)}return Object(s.useEffect)((function(){setTimeout((function(){a(!0)}),3e3),window.addEventListener("resize",h)}),[]),c?d>700?Object(f.jsxs)("div",{className:"app",children:[Object(f.jsx)(I,{}),Object(f.jsx)(B,{messages:o})]}):Object(f.jsx)("div",{className:"app",children:Object(f.jsx)(J.a,{children:Object(f.jsxs)(p.c,{children:[Object(f.jsx)(p.a,{path:"/chat",children:Object(f.jsx)(B,{messages:o})}),Object(f.jsx)(p.a,{path:"/",children:Object(f.jsx)(I,{})})]})})}):Object(f.jsx)(q,{})},Q=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,119)).then((function(t){var c=t.getCLS,s=t.getFID,a=t.getFCP,n=t.getLCP,i=t.getTTFB;c(e),s(e),a(e),n(e),i(e)}))},X=c(39),Y=function(e,t){switch(t.type){case"SET_ROOM_ID":return Object(X.a)(Object(X.a)({},e),{},{roomId:t.roomId})}};i.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(v,{initialState:{roomId:""},reducer:Y,children:Object(f.jsx)(G,{})})}),document.getElementById("root")),Q()},68:function(e,t,c){},69:function(e,t,c){},70:function(e,t,c){},71:function(e,t,c){},72:function(e,t,c){},78:function(e,t,c){},98:function(e,t,c){},99:function(e,t,c){}},[[103,1,2]]]);
//# sourceMappingURL=main.7b46e4a4.chunk.js.map